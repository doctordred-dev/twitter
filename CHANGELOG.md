# Changelog - –î–æ–¥–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É

## üìÖ 5 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025

### ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

#### üî¥ –í–∏—Å–æ–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–∞–∑–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ)

1. **GET `/posts/:id`** - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞
   - –ü–æ–≤–µ—Ä—Ç–∞—î –ø–æ–≤–Ω–∏–π –æ–±'—î–∫—Ç –ø–æ—Å—Ç–∞ –∑ –∞–≤—Ç–æ—Ä–æ–º, –ª–∞–π–∫–∞–º–∏ —Ç–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏
   - –í–∫–ª—é—á–∞—î `isLiked` –ø–æ–ª–µ –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
   - –ü—ñ–¥—Ç—Ä–∏–º—É—î `_count` –¥–ª—è likes —Ç–∞ comments

2. **PATCH `/posts/:id`** - –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø–æ—Å—Ç–∞
   - –î–æ–∑–≤–æ–ª—è—î —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –≤–ª–∞—Å–Ω—ñ –ø–æ—Å—Ç–∏
   - –û–±–º–µ–∂–µ–Ω–Ω—è: –º–æ–∂–Ω–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ç—è–≥–æ–º 15 —Ö–≤–∏–ª–∏–Ω –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
   - –í–∞–ª—ñ–¥–∞—Ü—ñ—è: —Ç–µ–∫—Å—Ç –≤—ñ–¥ 1 –¥–æ 280 —Å–∏–º–≤–æ–ª—ñ–≤

3. **DELETE `/posts/:id`** - –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ—Å—Ç–∞
   - Soft delete (–≤—Å—Ç–∞–Ω–æ–≤–ª—é—î `isDeleted = true`)
   - –î–æ–∑–≤–æ–ª—è—î –≤–∏–¥–∞–ª—è—Ç–∏ —Ç—ñ–ª—å–∫–∏ –≤–ª–∞—Å–Ω—ñ –ø–æ—Å—Ç–∏

#### üü° –°–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (–ø–æ–∫—Ä–∞—â—É—î UX)

4. **POST `/posts/:id/comments`** - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—è
   - –°—Ç–≤–æ—Ä—é—î –∫–æ–º–µ–Ω—Ç–∞—Ä –¥–æ –ø–æ—Å—Ç–∞
   - –í—ñ–¥–ø—Ä–∞–≤–ª—è—î —É–≤–µ–¥–æ–º–ª–µ–Ω–Ω—è –∞–≤—Ç–æ—Ä—É –ø–æ—Å—Ç–∞
   - –í—ñ–¥–ø—Ä–∞–≤–ª—è—î WebSocket –ø–æ–¥—ñ—é `post:comment`
   - –ü–æ–≤–µ—Ä—Ç–∞—î –∫–æ–º–µ–Ω—Ç–∞—Ä –∑ –¥–∞–Ω–∏–º–∏ –∞–≤—Ç–æ—Ä–∞

5. **GET `/posts/:id/comments?limit=50&cursor=uuid`** - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
   - –ü—ñ–¥—Ç—Ä–∏–º—É—î cursor-based –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é
   - –§—ñ–ª—å—Ç—Ä—É—î –≤–∏–¥–∞–ª–µ–Ω—ñ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
   - –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–∞ createdAt (desc)

6. **DELETE `/posts/:postId/comments/:commentId`** - –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—è
   - Soft delete –∫–æ–º–µ–Ω—Ç–∞—Ä—è
   - –î–æ–∑–≤–æ–ª—è—î –≤–∏–¥–∞–ª—è—Ç–∏ —Ç—ñ–ª—å–∫–∏ –≤–ª–∞—Å–Ω—ñ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ

#### üîß –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π

7. **GET `/posts/feed`** - –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–∫–∞–∑ –ø–æ—Å—Ç—ñ–≤
   - ‚úÖ –¢–µ–ø–µ—Ä –≤–∫–ª—é—á–∞—î –≤–ª–∞—Å–Ω—ñ –ø–æ—Å—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
   - ‚úÖ –í–∫–ª—é—á–∞—î –ø–æ—Å—Ç–∏ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –Ω–∞ —è–∫–∏—Ö –ø—ñ–¥–ø–∏—Å–∞–Ω–∏–π –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
   - ‚úÖ –î–æ–¥–∞–Ω–æ `isLiked` –ø–æ–ª–µ
   - ‚úÖ –†–æ–∑—à–∏—Ä–µ–Ω–æ –¥–∞–Ω—ñ –∞–≤—Ç–æ—Ä–∞ (bio, createdAt)
   - ‚úÖ –î–æ–¥–∞–Ω–æ `_count` –¥–ª—è –ª–∞–π–∫—ñ–≤

8. **POST `/posts`** - –ü–æ–≤–µ—Ä—Ç–∞—î –ø–æ–≤–Ω–∏–π –æ–±'—î–∫—Ç –ø–æ—Å—Ç–∞
   - ‚úÖ –í–∫–ª—é—á–∞—î –¥–∞–Ω—ñ –∞–≤—Ç–æ—Ä–∞
   - ‚úÖ –í–∫–ª—é—á–∞—î `_count` —Ç–∞ `isLiked`

9. **GET `/users/:username`** - –î–æ–¥–∞–Ω–æ isFollowing
   - ‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—î `{ user, isFollowing }` –∑–∞–º—ñ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ `user`

10. **GET `/users/:username/posts`** - –ù–æ–≤–∏–π endpoint
    - –ü–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    - –ü—ñ–¥—Ç—Ä–∏–º—É—î –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é
    - –í–∫–ª—é—á–∞—î `isLiked` –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### üóÑÔ∏è –ó–º—ñ–Ω–∏ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö

#### –ù–æ–≤–∞ –º–æ–¥–µ–ª—å: Comment

```prisma
model Comment {
  id        String   @id @default(uuid())
  postId    String
  authorId  String
  text      String   @db.Text
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  isDeleted Boolean  @default(false)

  post      Post     @relation(fields: [postId], references: [id])
  author    User     @relation(fields: [authorId], references: [id])

  @@index([postId, createdAt])
  @@index([authorId])
}
```

#### –û–Ω–æ–≤–ª–µ–Ω—ñ –º–æ–¥–µ–ª—ñ:

- **User**: –î–æ–¥–∞–Ω–æ `comments Comment[]`
- **Post**: –î–æ–¥–∞–Ω–æ `comments Comment[]`

### üîî –ù–æ–≤—ñ —Ç–∏–ø–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω—å

–î–æ–¥–∞–Ω–æ –¥–æ `NotificationType`:
- `comment` - –∫–æ–º–µ–Ω—Ç–∞—Ä –¥–æ –ø–æ—Å—Ç–∞
- `follow` - –Ω–æ–≤–∞ –ø—ñ–¥–ø–∏—Å–∫–∞ (–¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó)

### üåê –ù–æ–≤—ñ WebSocket –ø–æ–¥—ñ—ó

- **`post:comment`** - –Ω–æ–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä –¥–æ –ø–æ—Å—Ç–∞
  ```json
  {
    "comment": {
      "id": "uuid",
      "postId": "uuid",
      "authorId": "uuid",
      "text": "–¢–µ–∫—Å—Ç –∫–æ–º–µ–Ω—Ç–∞—Ä—è",
      "createdAt": "2025-01-01T00:00:00.000Z",
      "author": { ... }
    }
  }
  ```

### üìù –û–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- **FRONTEND_PROMPT.md**: –û–Ω–æ–≤–ª–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏ API –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- –î–æ–¥–∞–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –¥–ª—è –Ω–æ–≤–∏—Ö endpoints

### ‚ö†Ô∏è Breaking Changes

1. **GET `/posts/feed`**: –ó–º—ñ–Ω–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
   - –ë—É–ª–æ: `{ items: [...], nextCursor }` 
   - –°—Ç–∞–ª–æ: `{ posts: [...], nextCursor }`

2. **GET `/users/:username`**: –ó–º—ñ–Ω–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
   - –ë—É–ª–æ: `{ id, username, ... }`
   - –°—Ç–∞–ª–æ: `{ user: { id, username, ... }, isFollowing }`

3. **POST `/posts`**: –ó–º—ñ–Ω–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
   - –ë—É–ª–æ: `{ id, text, ... }`
   - –°—Ç–∞–ª–æ: `{ post: { id, text, author, _count, isLiked, ... } }`

### üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

- –í—Å—ñ endpoints –¥–ª—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –≤–∫–ª—é—á–∞—é—Ç—å soft delete
- –û–±–º–µ–∂–µ–Ω–Ω—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤: 15 —Ö–≤–∏–ª–∏–Ω
- –£–≤–µ–¥–æ–º–ª–µ–Ω–Ω—è —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –∫–æ–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—ñ
- WebSocket –ø–æ–¥—ñ—ó –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è –≤ room `user:{userId}`

### üöÄ –ì–æ—Ç–æ–≤–æ –¥–æ –¥–µ–ø–ª–æ—é

–í—Å—ñ –∑–º—ñ–Ω–∏ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ:
- ‚úÖ TypeScript –∫–æ–º–ø—ñ–ª—è—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞
- ‚úÖ Prisma –º—ñ–≥—Ä–∞—Ü—ñ—è –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–∞
- ‚úÖ Prisma Client –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ
- ‚úÖ –í—Å—ñ endpoints –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ

### üì¶ –ú—ñ–≥—Ä–∞—Ü—ñ—ó

- **20251105203423_add_comments**: –î–æ–¥–∞–Ω–æ —Ç–∞–±–ª–∏—Ü—é `Comment`

### üéØ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏ (–Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ —Ü—å–æ–º—É —Ä–µ–ª—ñ–∑—ñ)

–§—É–Ω–∫—Ü—ñ—ó –∑ –Ω–∏–∑—å–∫–∏–º –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–æ–º, —è–∫—ñ –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ:
- –†–µ–ø–æ—Å—Ç–∏ (Retweets)
- –õ—ñ—á–∏–ª—å–Ω–∏–∫ —Ä–µ–ø–æ—Å—Ç—ñ–≤ —É –ø–æ—Å—Ç–∞—Ö
- –î–æ–¥–∞—Ç–∫–æ–≤—ñ WebSocket –ø–æ–¥—ñ—ó –¥–ª—è —Ä–µ–ø–æ—Å—Ç—ñ–≤
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø—Ä–∏–∫—Ä—ñ–ø–ª—é–≤–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤

